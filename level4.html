

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Level 4</title>
  <link rel="stylesheet" href="styles/main.css" />
  <link rel="stylesheet" href="styles/animations.css" />
</head>
<body class="level4">
  <div class="stars-bg"></div>

  <!-- Level intro -->
  <div class="level-intro-text" id="levelIntro">Level 4</div>

  <!-- Navbar -->
  <nav class="navbar">
    <ul class="nav-links">
      <li><a href="index.html">Home</a></li>
      <li><a href="manual.html">Manual</a></li>
      <li class="active">Level 1</li>
      <li class="active">Level 2</li>
      <li class="active">Level 3</li>
      <li class="active">Level 4</li>
    </ul>
    <div class="hearts-container" id="hearts"></div>
  </nav>

  <!-- Game Box -->
 <div class="gamebox">
    <h2 class="level-title">Level 4: Type Racer</h2>
    <div id="timer" class="hidden">00:30</div>

  <div id="paraBox" class="paraBox"></div>
    <div id="instruction" class="hidden instruction-text">
        <p>Write down the paragraph I just wrote loveyyy</p>
    </div>
    <textarea id="user-input" class="hidden user-input" placeholder="Type here..."></textarea>
    <div class="btn-group"></div>
    <button id="sendBtn" class="send-btn">Send</button>
     <button id="retryBtn" class="retry-btn">Retry</button>

         <p id="feedback" class="feedback hidden"></p>
    <button id="nextBtn" class="next-btn" style="display: none;" onclick="window.location.href='secret.html'">Click to Continue</button>
  </div>




   </div>
  <script>

// --- Heart + Confetti Utilities ---
function unlockNextLevel(level) {
  localStorage.setItem('levelReached', level);
}

function getHearts() {
  const stored = localStorage.getItem('hearts');
  return stored !== null ? parseInt(stored) : 3;
}

function setHearts(value) {
  localStorage.setItem('hearts', value);
}

function renderHearts() {
  const container = document.getElementById('hearts');
  const hearts = getHearts();
  container.innerHTML = '';
  for (let i = 0; i < 3; i++) {
    const img = document.createElement('img');
    img.src = 'assets/heart.svg';
    img.className = 'heart';
    if (i >= hearts) img.classList.add('lost');
    container.appendChild(img);
  }
}

function loseHeart(msg) {
  let hearts = getHearts();
  if (hearts > 0) {
    hearts--;
    setHearts(hearts);
    renderHearts();
    document.getElementById('feedback').textContent = msg;
  }

  if (hearts <= 0) {
    setTimeout(() => {
      alert("You have lost your soul");
      setHearts(3);
      window.location.href = "level1.html";
    }, 1000);
  }
}

function showConfetti() {
  for (let i = 0; i < 30; i++) {
    const dot = document.createElement("div");
    dot.className = "confetti";
    dot.style.left = `${Math.random() * 100}%`;
    dot.style.animationDuration = `${Math.random() * 2 + 1.5}s`;
    dot.style.background = `hsl(${Math.random() * 360}, 80%, 70%)`;
    document.body.appendChild(dot);
    setTimeout(() => dot.remove(), 3000);
  }
}




const paraBox = document.getElementById("paraBox");
const instruction = document.getElementById("instruction");
const timer = document.getElementById("timer");
const userInput = document.getElementById("user-input");
const sendBtn = document.getElementById("sendBtn");
const retryBtn = document.getElementById("retryBtn");
const feedback = document.getElementById("feedback");
const nextBtn = document.getElementById("nextBtn");

const paragraphs = [
  "I like my boyfriend's hair. His hair is a chaotic masterpiece, like a tornado met a shampoo commercial and decided to throw a party. We have deep conversations about the universe, but mostly we argue about who is stealing more blankets at night. I once caught him googling, 'how to be a better penguin boyfriend'. His smile could probably power a small city if we hooked it up to a generator lol",
  "Once upon a time, there lived Anna, a hurricane like full-time chaos merchant. One fine tuesday, She dragged fate by the collar and said, 'Him. The tall one with villain jawline. Rohit wasn't ready, but too bad, it was too late, he was already held at gun point and with a contract with a title written 'You're mine from today'. He agreed to be her lover at the end, mostly out of fear though. Now this is how kids I kidnapped your father. ",
  "Anna talks to her houseplants like they're co-workers and fired one for lack of enthusiasm during photosynthesis. Her sleep schedule is just a chaotic roulette wheel that only lands on insomnia or accidental coma. If you tell her to act normal, she starts blinking manually and forgets how to breathe. She does skin care but her skin does not care. She laughs like a hyena sometimes. Chaos always finds Anna. Do not be like Anna."
];

let selectedParagraph = "";
let timerInterval = null;
let countdown = 30;




// --- Game Logic ---
function startTimer() {
  countdown = 30;
  timer.textContent = "00:30";
  timerInterval = setInterval(() => {
    countdown--;
    const display = countdown < 10 ? `00:0${countdown}` : `00:${countdown}`;
    timer.textContent = display;

    if (countdown <= 0) {
      clearInterval(timerInterval);
      timer.textContent = "Time's up :(";
      sendBtn.disabled = true;
       loseHeart("Time's up :(");
    }
  }, 1000);
}

function resetGameUI() {
  paraBox.classList.remove("hidden");
  instruction.classList.add("hidden");
  userInput.classList.add("hidden");
  sendBtn.classList.add("hidden");
  retryBtn.classList.add("hidden");
  nextBtn.style.display = "none";
  feedback.classList.add("hidden");
  userInput.value = "";
  timer.classList.add("hidden");
}

function showInstructionPhase() {
  paraBox.classList.add("hidden");
  instruction.classList.remove("hidden");
  userInput.classList.remove("hidden");
  sendBtn.classList.remove("hidden");
  timer.classList.remove("hidden");

  timer.textContent = "00:30"; // <--- just to make sure it's not empty
  console.log("Timer should be visible now!");

  startTimer();
}

function loadNewParagraph() {
  const newPara = paragraphs[Math.floor(Math.random() * paragraphs.length)];
  paraBox.textContent = newPara;
  selectedParagraph = newPara;
}

// --- Game Start ---
window.onload = () => {
  renderHearts();
  resetGameUI();
  loadNewParagraph();

  // Show paragraph for 15s, then switch to instruction phase
  setTimeout(() => {
    showInstructionPhase();
  }, 15000);
};

// --- Button Events ---
sendBtn.addEventListener("click", () => {
  clearInterval(timerInterval);
  const answer = userInput.value.trim();

  if (answer === selectedParagraph) {
    feedback.textContent = "If you didn't copy then wow I underestimated your reading and typing skills";
    feedback.classList.remove("hidden");
    nextBtn.style.display = "inline-block";
    unlockNextLevel(5);
    showConfetti();
    sendBtn.classList.add("hidden");
  } else {
    feedback.textContent = "Reading and typing skill busted in 4k lol it's case and punctuation sensitive sweetie";
    feedback.classList.remove("hidden");
    retryBtn.classList.remove("hidden");
    sendBtn.classList.add("hidden");
    loseHeart("Reading and typing skill busted in 4k It's case and punctuation sensitive sweetie");
  }
});

retryBtn.addEventListener("click", () => {
  location.reload();
});








  </script>

<style>
.stars-bg {
  position: absolute;
  width: 100%;
  height: 100%;
  background: url('assets/stars-bg.svg') repeat;
  animation: starsMove 28s linear infinite;
  opacity: 0.2;
  z-index: -1;
}

@keyframes starsMove {
  from { background-position: 0 0; }
  to { background-position: 1000px 1000px; }
}



/* Level 4 */



.level-intro-text {
  position: fixed;
  top: 40%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 4rem;
  font-weight: 700;
  color: white;
  z-index: 10;
  opacity: 0;
  animation: introSlide 2.5s ease forwards;
}

body.level4{
  background: black;
  margin: 0;
  padding: 0;
  font-family: 'Poppins', sans-serif;
  color: white;
  height: 100vh;
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}


/* Nav Bar */
.navbar {
  position: absolute;
  top: 1rem;
  left: 1rem;
  z-index: 3;
}

.nav-links {
  list-style: none;
  display: flex;
  flex-wrap: wrap;
  gap: 30px;
  font-size: 0.85rem;
}

.nav-links li {
  padding: 6px 10px;
  border: 1px solid white;
  border-radius: 5px;
  cursor: default;
  opacity: 0.6;
}

.nav-links li a {
  color: white;
  text-decoration: none;
  transition: all 0.3s ease;
}

.nav-links li.active {
  background-color: white;
  color: black;
  font-weight: bold;
  opacity: 1;
}

.nav-links li:not(.active):hover {
  background-color: white;
  color: black;
  font-weight: bold;
  opacity: 1;
}

.nav-links li:not(.active):hover a {
  color: black;
}

.nav-links li.disabled {
  pointer-events: none;
  opacity: 0.3;
}



/* core level 1 parts */
.level-content {
  text-align: center;
  margin-top: 2rem;
}

.gamebox {
  border: 2px solid white;
  padding: 2rem;
  border-radius: 12px;
  background-color: rgba(255,255,255,0.05);
  text-align: center;
  animation: fadeIn 0.6s ease;
  max-width: 600px;
  margin: auto;
}

#timer {
  font-family: 'Inter', sans-serif;
  font-size: 20px;
  color: white;
  text-align: center;
  margin-top: 8px;
  margin-bottom: 16px;
  display: block;
}

#paraBox {
    background: rgba(255, 255, 255, 0.05);
  border: 1px solid #aaaaaad0;
  border-radius: 12px;
  padding: 16px;
  font-size: 1.1rem;
  margin: 20px auto;
  max-width: 600px;
  text-align: center;
  font-family: 'Georama', sans-serif;
  font-size: 1.1rem;
  margin-bottom: 22px;
  line-height: 1.6;
  color: #ffffff;
}

.instruction-text {
   margin-top: 10px;
  font-size: 1.1rem;
  color: #ffffff;
  font-size: 1rem;
  margin-bottom: 10px;
}

textarea {
  width: 100%;
  height: 150px;
  resize: none;
  border: none;
  border-radius: 12px;
  padding: 10px;
  font-size: 1rem;
  font-family: 'Inter', sans-serif;
}


.user-input {
  width: 90%;
  height: 120px;
  margin-top: 20px;
  font-size: 1rem;
  border-radius: 8px;
  padding: 12px;
  resize: none;
  font-family: 'Inter', sans-serif;
  background: transparent;
  color: rgb(255, 255, 255);
}

.btn-group {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin-top: 20px;
}

button.retry-btn,
button.send-btn {
  padding: 12px 24px;
  border-radius: 8px;
  font-weight: bold;
  font-family: 'Poppins', sans-serif;
  cursor: pointer;
  background: transparent;
  color: rgb(255, 255, 255);
  border: none;
  transition: 0.3s ease;
   padding: 6px 10px;
  border: 1px solid white;
  border-radius: 5px;
}

button.next-btn{
  background-color: #ffffff;
  color: #000;
  padding: 12px 24px;
  border-radius: 8px;
  font-weight: bold;
  font-family: 'Poppins', sans-serif;
  cursor: pointer;
}  

button.retry-btn:hover,
button.send-btn:hover,
button.next-btn:hover {
  transform: scale(1.05);
  background: #fffeff;
  color: #000;
}

#feedback {
  margin-top: 20px;
  font-size: 1.2rem;
  color: #ffe6f2;
}

.hidden {
  display: none;
}






.confetti {
  position: fixed;
  top: 0;
  width: 10px;
  height: 10px;
  z-index: 999;
  border-radius: 50%;
  animation: confetti 3s ease-in-out forwards;
}

@keyframes fall {
  to {
    transform: translateY(100vh);
    opacity: 0;
  }
}

/* Hearts Container */
.hearts-container {
  position: fixed;
  top: 20px;
  right: 40px;
  display: flex;
  gap: 10px;
  z-index: 10;
}

/* Each Heart */
.heart {
  width: 25px;
  height: 25px;
  filter: drop-shadow(0 0 3px white);
  transition: transform 0.2s ease;
}

.heart.lost {
  opacity: 0.2;
  filter: grayscale(1);
}


.fade-in {
  animation: fadeIn 1.2s ease-out forwards;
}

.fade-out {
  animation: fadeOut 1s ease-in forwards;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(30px); }
  to   { opacity: 1; transform: translateY(0); }
}

@keyframes fadeOut {
  from { opacity: 1; transform: translateY(0); }
  to   { opacity: 0; transform: translateY(-30px); }
}




@keyframes confetti {
  0% { transform: translateY(0); }
  100% { transform: translateY(400px) rotate(720deg); }
}


@keyframes confetti-fall {
  0% { transform: translateY(0); }
  100% { transform: translateY(500px) rotate(720deg); }
}




</style>
</body>
</html>



